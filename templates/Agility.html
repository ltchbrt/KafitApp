<!DOCTYPE html>
<html lang="en">
  <head>
    <title>KaFit Fitness App</title>

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />

    <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/assets/css/font-awesome.min.css" />
    <link rel="stylesheet" href="/assets/css/aos.css" />

    <!-- MAIN CSS -->
    <link rel="stylesheet" href="/assets/css/tooplate-gymso-style.css" />
  </head>

  <style>
    .p_title {
      font-size: 25px;
      padding: 1rem;

      margin: 0 !important;
      text-align: center;
    }

    .p_title1 {
      font-size: 15px;
      padding: 1rem;
      margin: 0 !important;
    }

    .p_header {
      font-size: 18px;
      background-color: #80808091;
      padding: 1rem;
      border-radius: 5px;
    }

    .list {
      font-size: 20px;
      font-weight: bold;
      padding-bottom: 1rem;
    }

    .icon button {
      border: none;
      background: none;
      font-size: 17px;
      font-weight: bold;
      padding-bottom: 1rem;
    }

    .icon {
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
      gap: 0.5rem;
    }

    .btn_func {
      padding: 1rem;
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      margin-top: 2rem;
    }

    .btn_func a {
      width: 75px;
      height: 35px;
      border-radius: 7px;
      padding-top: 0.3rem;
      text-align: center;
      font-size: 12px;
      background-color: black;
      color: white;
      border: white 1px solid;
    }
    .btn_func button {
      width: 75px;
      height: 35px;
      border-radius: 7px;
      font-size: 12px;
      background-color: black;
      color: white;
      border: white 1px solid;
    }
  </style>
  <body data-spy="scroll" data-target="#navbarNav" data-offset="50">
    <!-- MENU BAR -->
    <nav class="navbar navbar-expand-lg fixed-top">
      <div class="container">
        <a class="navbar-brand" href="/">KaFit App</a>

        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ml-lg-auto">
            <li class="nav-item">
              <a href="/overview" class="nav-link smoothScroll">OVERVIEW</a>
            </li>

            <li class="nav-item">
              <a href="/PFT" class="nav-link smoothScroll">PFT</a>
            </li>
            <li class="nav-item">
              <a href="/Profile" class="nav-link smoothScroll">PROFILE</a>
            </li>
            <li class="nav-item">
              <a href="/Resources" class="nav-link smoothScroll">RESOURCES</a>
            </li>
            <li class="nav-item">
              <a href="/About" class="nav-link smoothScroll">ABOUT</a>
            </li>
            <li class="nav-item">
              <a href="/logout" class="nav-link smoothScroll">LOGOUT</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- ABOUT -->
    <section class="about section centerdata" id="about">
      <div class="container">
        <div class="row">
          <div class="mt-lg-5 mb-lg-0 mb-4 col-lg-5 col-md-10 mx-auto col-12">
            <h1 class="p_title">AGILITY</h1>
            <p style="text-align: justify">
              is the ability to move in different directions quickly using a
              combination of balance, coordination, speed, strength, and
              endurance.
            </p>
            <div class="btn_func">
              <a href="/Agility_Test" style="width: 40%"
                >Hexagon Agility Test</a
              >
              <button
                data-aos="fade-up"
                data-aos-delay="300"
                data-toggle="modal"
                data-target="#DataSccore"
                onclick="Score()"
              >
                SCORE
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div
      class="modal fade"
      id="DataSccore"
      tabindex="-1"
      role="dialog"
      aria-labelledby="membershipFormLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title" id="membershipFormLabel">SCORE</h2>

            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="modal-body">
            <div
              style="
                display: flex;
                flex-direction: column;
                justify-content: center;
                margin-top: 1rem;
                gap: 1rem;
              "
            >
              <div
                style="
                  display: flex;
                  flex-direction: column;
                  justify-content: center;
                "
              >
                <span style="font-size: 11px; font-style: italic"
                  >Clockwise</span
                >
                <input
                  type="number"
                  name="data"
                  id="weight"
                  placeholder="Hexagon Agility Test"
                />
              </div>
              <div
                style="
                  display: flex;
                  flex-direction: column;
                  justify-content: center;
                "
              >
                <span style="font-size: 11px; font-style: italic"
                  >Counter Clockwise</span
                >
                <input
                  type="number"
                  name="data"
                  id="height"
                  placeholder="Hexagon Agility Test"
                />
              </div>

              <div
                style="
                  display: flex;
                  flex-direction: column;
                  justify-content: space-around;
                "
              >
                <p>Average: <span id="result"></span></p>
                <p>Hexagon Agility Test: <span id="hresult"></span></p>
              </div>

              <button
                style="
                  height: 35px;
                  border-radius: 7px;
                  font-size: 12px;
                  background-color: black;
                  color: white;
                  border: white 1px solid;
                "
                onclick="Save()"
              >
                SAVE
              </button>
            </div>
          </div>

          <div class="modal-footer"></div>
        </div>
      </div>
    </div>

    <!-- SCRIPTS -->
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/aos.js"></script>
    <script src="/assets/js/smoothscroll.js"></script>
    <script src="/assets/js/custom.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.6.1.min.js"
      integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
      crossorigin="anonymous"
    ></script>
    <script
      type="text/javascript"
      src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"
    ></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>

    <script>
      $(document).ready(function () {
        View();
      });

      function View() {
        var d = new Date();
        var date = moment(d).format("YYYY-MM-DD");
        var value = $.cookie("id");
        var result = 0;
        $.get("/api/get_agility", function (index) {
          var result = JSON.parse(index).item;
          $.each(result, function (_, v) {
            if (v.UserID == value && date == v.Date) {
              $("#weight").val(v.Test);
              $("#height").val(v.Test1);

              result = parseFloat(v.Test) + parseFloat(v.Test1) / 2;
              if (result >= 25) {
                $("#hresult").html("Poor");
              } else if (result >= parseFloat(21) && v.Test <= parseFloat(25)) {
                $("#hresult").html("Needs Improvement");
              } else if (result >= parseFloat(16) && v.Test <= parseFloat(20)) {
                $("#hresult").html("Fair");
              } else if (result >= parseFloat(11) && v.Test <= parseFloat(15)) {
                $("#hresult").html("Good");
              } else if (result >= parseFloat(10) && v.Test <= parseFloat(6)) {
                $("#hresult").html("Very Good");
              } else if (result <= parseFloat(5)) {
                $("#hresult").html("Excellent");
              }

              $("#result").html(result);
            }
          });
        });
      }
      function Score() {}

      function Save() {
        var w = $("#weight").val();
        var h = $("#height").val();

        if (w == "") {
          Swal.fire({
            toast: true,
            position: "center",
            icon: "warning",
            title: "Please Complete Required Details",
            showConfirmButton: false,
            timer: 3000,
          });
        } else {
          $.ajax({
            url: "/api/agility",
            data: {
              weight: w,
              height: h,
            },
            success: function (res) {
              Swal.fire({
                toast: true,
                position: "center",
                icon: "success",
                title: "Agility Record Success",
                showConfirmButton: false,
                timer: 3000,
              }).then(function () {
                View();
              });
            },
          });
        }
      }
    </script>
  </body>
</html>
